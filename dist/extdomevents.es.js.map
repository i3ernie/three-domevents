{"version":3,"file":"extdomevents.es.js","sources":["../src/Domevents.es.js","../src/ExtendedDomevents.es.js"],"sourcesContent":["import {Raycaster, Vector3} from \"../node_modules/three/build/three.module.js\";\n\n// This THREEx helper makes it easy to handle the mouse events in your 3D scene\n//\n// * CHANGES NEEDED\n//   * handle drag/drop\n//   * notify events not object3D - like DOM\n//     * so single object with property\n//   * DONE bubling implement bubling/capturing\n//   * DONE implement event.stopPropagation()\n//   * DONE implement event.type = \"click\" and co\n//   * DONE implement event.target\n//\n// # Lets get started\n//\n// First you include it in your page\n//\n// ```<script src='threex.domevent.js'></script>```\n//\n// # use the object oriented api\n//\n// You bind an event like this\n//\n// ```mesh.on('click', function(object3d){ ... })```\n//\n// To unbind an event, just do\n//\n// ```mesh.off('click', function(object3d){ ... })```\n//\n// As an alternative, there is another naming closer DOM events.\n// Pick the one you like, they are doing the same thing\n//\n// ```mesh.addEventListener('click', function(object3d){ ... })```\n// ```mesh.removeEventListener('click', function(object3d){ ... })```\n//\n// # Supported Events\n//\n// Always in a effort to stay close to usual pratices, the events name are the same as in DOM.\n// The semantic is the same too.\n// Currently, the available events are\n// [click, dblclick, mouseup, mousedown](http://www.quirksmode.org/dom/events/click.html),\n// [mouseover and mouse out](http://www.quirksmode.org/dom/events/mouseover.html).\n//\n//\n// First, you instanciate the object\n//\n// ```var domEvent = new DomEvent();```\n//\n// Then you bind an event like this\n//\n// ```domEvent.bind(mesh, 'click', function(object3d){ object3d.scale.x *= 2; });```\n//\n// To unbind an event, just do\n//\n// ```domEvent.unbind(mesh, 'click', callback);```\n//\n//\n// # Code\n\n//\n\n\t/** @namespace */\nconst TOUCH_MS = 200;\nlet TOUCH_TIMER;\nlet onlongtouch;\nlet TOUCH_duration = 500;\nlet TOUCH_BEGIN, TOUCH_LATEST = 0;\nlet TOUCH_POSX, TOUCH_POSY;\nconst CLICK_TIMEOUT = 500;\n\nconst logEvent = function( ev ){\n\tif ( ev.type === \"click\" || \n\t\tev.type === \"mousedown\" || ev.type === \"mouseup\" || \n\t\tev.type === \"mouseover\" || ev.type === \"mouseout\" ||\n\t\tev.type === \"dblclick\"\n\t)\n\t\tconsole.log( ev.type+\" - \"+ev.target.name );\n};\n\nconst _getRelativeMouseXY = function( domEvent ) {\n\n\tlet element = domEvent.target || domEvent.srcElement;\n\n\tif (element.nodeType === 3) {\n\t\telement = element.parentNode; // Safari fix -- see http://www.quirksmode.org/js/events_properties.html\n\t}\n\n\t//get the real position of an element relative to the page starting point (0, 0)\n\t//credits go to brainjam on answering http://stackoverflow.com/questions/5755312/getting-mouse-position-relative-to-content-area-of-an-element\n\tlet elPosition\t= { x : 0 , y : 0};\n\tlet tmpElement\t= element;\n\t//store padding\n\tlet style\t= getComputedStyle(tmpElement, null);\n\telPosition.y += parseInt(style.getPropertyValue(\"padding-top\"), 10);\n\telPosition.x += parseInt(style.getPropertyValue(\"padding-left\"), 10);\n\n\t//add positions\n\tdo {\n\t\telPosition.x\t+= tmpElement.offsetLeft;\n\t\telPosition.y\t+= tmpElement.offsetTop;\n\t\tstyle\t\t= getComputedStyle(tmpElement, null);\n\n\t\telPosition.x\t+= parseInt(style.getPropertyValue(\"border-left-width\"), 10);\n\t\telPosition.y\t+= parseInt(style.getPropertyValue(\"border-top-width\"), 10);\n\t} while(tmpElement = tmpElement.offsetParent);\n\n\tlet elDimension\t= {\n\t\twidth\t: (element === window) ? window.innerWidth\t: element.offsetWidth,\n\t\theight\t: (element === window) ? window.innerHeight\t: element.offsetHeight\n\t};\n\n\tif ( domEvent.type === \"touchend\" || domEvent.type === \"touchstart\" ){\n\t\treturn {\n\t\t\tx : +((domEvent.changedTouches[ 0 ].pageX - elPosition.x) / elDimension.width ) * 2 - 1,\n\t\t\ty : -((domEvent.changedTouches[ 0 ].pageY - elPosition.y) / elDimension.height) * 2 + 1\n\t\t};\n\t}\n\telse{\n\t\treturn {\n\t\t\tx : +((domEvent.pageX - elPosition.x) / elDimension.width ) * 2 - 1,\n\t\t\ty : -((domEvent.pageY - elPosition.y) / elDimension.height) * 2 + 1\n\t\t};\n\t}\n};\n\n// # Constructor\nconst DomEvents = function( camera, domElement )\n{\n\tthis._camera\t\t= camera || null;\n\tthis._domElement \t= domElement || document;\n\tthis._ray \t\t\t= new Raycaster();\n\tthis._selected\t\t= null;\n\tthis._boundObjs\t\t= {};\n\t// Bind dom event for mouse and touch\n\tlet _this\t\t\t= this;\n\tthis.firstClick \t= false;\n\tthis.delay = 300;\n\n\tthis._$onClick\t\t= function(){ _this._onClick.apply(_this, arguments); \t};\n\tthis._$onDblClick\t= function(){ _this._onDblClick.apply(_this, arguments);\t};\n\tthis._$onMouseMove\t= function(){ _this._onMouseMove.apply(_this, arguments);\t};\n\tthis._$onMouseDown\t= function(){ _this._onMouseDown.apply(_this, arguments);\t};\n\tthis._$onMouseUp\t= function(){ _this._onMouseUp.apply(_this, arguments);\t\t};\n\tthis._$onTouchMove\t= function(){ _this._onTouchMove.apply(_this, arguments);\t};\n\tthis._$onTouchStart\t= function(){ _this._onTouchStart.apply(_this, arguments);\t};\n\tthis._$onTouchEnd\t= function(){ _this._onTouchEnd.apply(_this, arguments);\t};\n\tthis._$onContextmenu\t= function(){ _this._onContextmenu.apply(_this, arguments);\t};\n\n\tthis._domElement.addEventListener( 'click'\t\t, this._$onClick\t\t, false );\n\tthis._domElement.addEventListener( 'dblclick'\t, this._$onDblClick\t\t, false );\n\tthis._domElement.addEventListener( 'mousemove'\t, this._$onMouseMove\t, false );\n\tthis._domElement.addEventListener( 'mousedown'\t, this._$onMouseDown\t, false );\n\tthis._domElement.addEventListener( 'mouseup'\t, this._$onMouseUp\t\t, false );\n\n\tthis._domElement.addEventListener( 'touchmove'\t, this._$onTouchMove\t, false );\n\tthis._domElement.addEventListener( 'touchstart'\t, this._$onTouchStart\t, false );\n\tthis._domElement.addEventListener( 'touchend'\t, this._$onTouchEnd\t\t, false );\n\t\n\tthis._domElement.addEventListener( 'contextmenu', this._$onContextmenu\t, false );\n};\n\nDomEvents.eventNames\t= [\n\t\"click\",\n\t\"dblclick\",\n\t\"mouseover\",\n\t\"mouseout\",\n\t\"mousemove\",\n\t\"mousedown\",\n\t\"mouseup\",\n\t\"contextmenu\",\n\t\"touchstart\",\n\t\"touchend\",\n    \"mousemiddledown\",\n    \"mouserightdown\",\n    \"mousemiddleup\",\n    \"mouserightup\"\n];\n\nDomEvents.eventMapping = {\n\t\"click\" : \"onClick\",\n\t\"mousedown\" : \"onMousedown\",\n\t\"mouseup\" \t: \"onMouseup\",\n\t\"mouseover\" : \"onMouseover\",\n\t\"mouseout\" \t: \"onMouseout\",\n\t\"mousemove\" : \"onMousemove\",\n\t\"dblclick\"  : \"onDblclick\"\n};\n\nDomEvents.hasEvent = function( eventName ){\n\treturn DomEvents.eventNames.indexOf( eventName ) !== -1;\n};\n\nObject.assign( DomEvents.prototype,  {\n\n\t// # Destructor\n\tdestroy\t: function()\n\t{\n\t\t// unBind dom event for mouse and touch\n\t\tthis._domElement.removeEventListener( 'click'\t\t, this._$onClick\t\t, false );\n\t\tthis._domElement.removeEventListener( 'dblclick'\t, this._$onDblClick\t\t, false );\n\t\tthis._domElement.removeEventListener( 'mousemove'\t, this._$onMouseMove\t, false );\n\t\tthis._domElement.removeEventListener( 'mousedown'\t, this._$onMouseDown\t, false );\n\t\tthis._domElement.removeEventListener( 'mouseup'\t\t, this._$onMouseUp\t\t, false );\n\t\tthis._domElement.removeEventListener( 'touchmove'\t, this._$onTouchMove\t, false );\n\t\tthis._domElement.removeEventListener( 'touchstart'\t, this._$onTouchStart\t, false );\n\t\tthis._domElement.removeEventListener( 'touchend'\t, this._$onTouchEnd\t\t, false );\n\t\tthis._domElement.removeEventListener( 'contextmenu'\t, this._$onContextmenu\t, false );\n\t},\n\n\n\t/********************************************************************************/\n\t/*\t\tdomevent context\t\t\t\t\t\t*/\n\t/********************************************************************************/\n\n\t// handle domevent context in object3d instance\n\n\t_objectCtxInit\t: function( object3d ){\n\t\tobject3d._3xDomEvent = {};\n\t},\n\t_objectCtxDeinit : function( object3d ){\n\t\tdelete object3d._3xDomEvent;\n\t},\n\t_objectCtxIsInit : function( object3d ){\n\t\treturn !!object3d._3xDomEvent;\n\t},\n\t_objectCtxGet : function( object3d ){\n\t\treturn object3d._3xDomEvent;\n\t},\n\t/********************************************************************************/\n\t/*\t\t\t\t\t\t\t\t\t\t*/\n\t/********************************************************************************/\n\n\n\t/**\n\t * Getter/Setter for camera\n\t */\n\tcamera : function( value )\n\t{\n\t\tif( value )\tthis._camera = value;\n\t\treturn this._camera;\n\t},\n\n\taddEventListener : function( object3d, eventName, callback, opt ){\n\t\topt = opt || {};\n\t\tlet useCapture = opt.useCapture || false;\n\t\tlet scope = this;\n\n\t\tif ( typeof eventName == \"object\" ) {\n\t\t\tfor ( let i = 0; i<eventName.length; i++){\n\t\t\t\tthis.bind(object3d, eventName[i], callback, useCapture);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.bind(object3d, eventName, callback, useCapture);\n\t\tif ( opt.recursive ) {\n\t\t\t_.each( object3d.children, function( object3d ){\n\t\t\t\tscope.bind( object3d, eventName, callback, useCapture );\n\t\t\t});\n\t\t}\n\t},\n\n\thasListener : function( object3d, eventName ) {\n\t\tlet objectCtx = this._objectCtxGet( object3d );\n\t\tif ( !objectCtx ) return false;\n\t\t\n\t\tlet listener = objectCtx[eventName+'Handlers'];\n\t\tif ( !listener ) return false;\n\n\t\treturn (listener.length > 0);\n\t},\n\n\tbind : function( object3d, eventName, callback, useCapture )\n\t{\n\t\tif ( !DomEvents.hasEvent( eventName ) ) {\n\t\t\tconsole.warn( \"not available events: \"+eventName, object3d );\n\t\t\treturn;\n\t\t}\n\n\t\tif( !this._objectCtxIsInit( object3d ) )\tthis._objectCtxInit( object3d );\n\t\tlet objectCtx = this._objectCtxGet( object3d );\n\t\tif( !objectCtx[eventName+'Handlers'] )\tobjectCtx[eventName+'Handlers']\t= [];\n\n\t\tobjectCtx[eventName+'Handlers'].push({\n\t\t\tcallback\t: callback,\n\t\t\tuseCapture\t: useCapture\n\t\t});\n\n\t\t// add this object in this._boundObjs\n\t\tif( this._boundObjs[eventName] === undefined ){\n\t\t\tthis._boundObjs[eventName]\t= [];\n\t\t}\n\t\tthis._boundObjs[eventName].push( object3d );\n\t},\n\n\tremoveEventListener\t: function( object3d, eventName, callback, useCapture ){\n\t\tif ( eventName === null || eventName === undefined ){\n\t\t\teventName = DomEvents.eventNames;\n\t\t\treturn;\n\t\t}\n\t\tif ( typeof eventName == \"object\"){\n\t\t\tfor ( let i = 0; i<eventName.length; i++){\n\t\t\t\tthis.unbind(object3d, eventName[i], callback, useCapture);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.unbind (object3d, eventName, callback, useCapture);\n\t},\n\n\tunbind : function( object3d, eventName, callback, useCapture )\n\t{\n\t\tif ( typeof eventName !== \"string\" ) {\n\t\t\tconsole.error( \"ERROR: DomEvents:unbind eventName must be a string\" );\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.assert( DomEvents.hasEvent( eventName ), \"not available events:\"+eventName );\n\n\t\tlet boundObjs = this._boundObjs[eventName];\n\t\tif (boundObjs == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif( !this._objectCtxIsInit(object3d) )\tthis._objectCtxInit(object3d);\n\n\t\tlet objectCtx\t= this._objectCtxGet(object3d);\n\t\tif( !objectCtx[eventName+'Handlers'] )\tobjectCtx[eventName+'Handlers']\t= [];\n\n\t\tlet handlers\t= objectCtx[eventName+'Handlers'];\n\n\t\tif (typeof callback !== \"function\") {   // kill all events of this type\n\t\t\tdelete objectCtx[eventName+'Handlers'];\n\t\t\tlet index = boundObjs.indexOf( object3d );\n\t\t\tif (index > -1) boundObjs.splice( index, 1 );\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let i = 0; i < handlers.length; i++ ){\n\t\t\tlet handler\t= handlers[i];\n\t\t\tif( callback !== handler.callback )\tcontinue;\n\t\t\tif( useCapture !== handler.useCapture )\tcontinue;\n\t\t\thandlers.splice(i, 1);\n\t\t\tbreak;\n\t\t}\n\n\t\t// from this object from this._boundObjs\n\t\tlet index = boundObjs.indexOf( object3d );\n\t\tif ( index !== -1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tboundObjs.splice( index, 1 );\n\t\tthis.clean();\n\n\t},\n\n\tremoveMappedListener :function ( obj ){\n\t\tlet scope = this;\n\n\t\tfor ( let key in DomEvents.eventMapping ){\n\t\t\tthis.removeEventListener( obj, key);\n\t\t}\n\t\tif ( obj.children.length > 0 ){\n\t\t\tobj.children.forEach( function( el ){\n\t\t\t\tscope.removeMappedListener( el );\n\t\t\t});\n\t\t}\n\t},\n\n\tactivate : function( object3d, listener ){\n\n\t\tlet scope = this;\n\n\t\tconst addListener = function( obj, listener ){\n\t\t\tlistener = listener || obj;\n\t\t\tfor ( let key in DomEvents.eventMapping ){\n\t\t\t\tif ( !scope.hasListener( obj, key ) ) {\n\t\t\t\t\tscope.addEventListener( obj, key, key);\n\t\t\t\t\tif ( listener[ DomEvents.eventMapping[key] ] ) {\n\t\t\t\t\t\tscope.addEventListener( obj, key, listener[ DomEvents.eventMapping[key] ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tif ( object3d.parent ){\n\t\t\taddListener( object3d, listener );\n\t\t}\n\t\t\n\t\tconst add = object3d.add;\n\t\tobject3d.add = function( child ){\n\t\t\taddListener( child );\n\n\t\t\tscope.activate( child );\t\t\t\n\t\t\t\n\t\t\tadd.apply( object3d, arguments );\n\t\t};\n\n\t\tif( object3d.children.length > 0 ){ \n\t\t\tobject3d.children.forEach(function( child ){ \n\t\t\t\tscope.activate( child );\n\t\t\t});\n\t\t}\n\n\t\tconst rem = object3d.remove;\n\t\tobject3d.remove = function( child ){\n\n\t\t\tscope.removeMappedListener( child );\n\n\t\t\trem.apply( object3d, arguments );\n\t\t};\n\n\t},\n\n\tclean : function( )\n\t{\n\t\tlet a;\n\t\tlet eventName;\n\t\tlet boundObjs;\n\n\t\tfor( let i = 0; i < DomEvents.eventNames.length; i++ ) {\n\t\t\teventName = DomEvents.eventNames[i];\n\t\t\tboundObjs = this._boundObjs[eventName];\n\t\t\ta = [];\n\n\t\t\tif (boundObjs){\n\t\t\t\tfor ( let i = 0, l = boundObjs.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( boundObjs[i].geometry ) { a.push(boundObjs[i]); }\n\n\t\t\t\t}\n\t\t\t\tthis._boundObjs[eventName] = a;\n\t\t\t}\n\t\t}\n\t},\n\n\t_bound\t: function( eventName, object3d )\n\t{\n\t\tlet objectCtx = this._objectCtxGet( object3d );\n\t\tif( !objectCtx ) return false;\n\t\treturn !!objectCtx[eventName+'Handlers'];\n\t},\n\n\n\t/********************************************************************************/\n\t/*\t\tonMove\t\t\t\t\t\t\t\t*/\n\t/********************************************************************************/\n\n\t// # handle mousemove kind of events\n\n\t_onMove\t: function( eventName, mouseX, mouseY, origDomEvent )\n\t{\n\t\t//console.log('eventName', eventName, 'boundObjs', this._boundObjs[eventName])\n\t\t// get objects bound to this event\n\t\tlet boundObjs\t= this._boundObjs[eventName];\n\t\tif( boundObjs === undefined || boundObjs.length === 0 )\treturn;\n\n\t\t// compute the intersection\n\t\tlet vector = new Vector3( mouseX, mouseY, 0.5 );\n\t\tthis._ray.setFromCamera( vector, this._camera );\n\n\t\tlet intersects = null;\n\t\ttry {\n\t\t\tintersects  = this._ray.intersectObjects( boundObjs );\n\t\t} catch( e ){\n\t\t\tthis.clean();\n\t\t\tthis._onMove( eventName, mouseX, mouseY, origDomEvent );\n\t\t\treturn;\n\t\t}\n\n\t\tlet oldSelected\t= this._selected;\n\t\tlet notifyOver, notifyOut, notifyMove;\n\t\tlet intersect;\n\t\tlet newSelected;\n\n\t\tif( intersects.length > 0 ){\n\t\t\tintersect\t= intersects[ 0 ];\n\t\t\tnewSelected\t= intersect.object;\n\n\t\t\tthis._selected\t= newSelected;\n\t\t\t// if newSelected bound mousemove, notify it\n\t\t\tnotifyMove\t= this._bound('mousemove', newSelected);\n\n\t\t\tif( oldSelected !== newSelected ){\n\t\t\t\t// if newSelected bound mouseenter, notify it\n\t\t\t\tnotifyOver\t= this._bound('mouseover', newSelected);\n\t\t\t\t// if there is a oldSelect and oldSelected bound mouseleave, notify it\n\t\t\t\tnotifyOut\t= oldSelected && this._bound('mouseout', oldSelected);\n\t\t\t}\n\t\t}else{\n\t\t\t// if there is a oldSelect and oldSelected bound mouseleave, notify it\n\t\t\tnotifyOut\t= oldSelected && this._bound('mouseout', oldSelected);\n\t\t\tthis._selected\t= null;\n\t\t}\n\n\t\t// notify mouseMove - done at the end with a copy of the list to allow callback to remove handlers\n\t\tnotifyMove && this._notify('mousemove', newSelected, origDomEvent, intersect);\n\t\t// notify mouseEnter - done at the end with a copy of the list to allow callback to remove handlers\n\t\tnotifyOver && this._notify('mouseover', newSelected, origDomEvent, intersect);\n\t\t// notify mouseLeave - done at the end with a copy of the list to allow callback to remove handlers\n\t\tnotifyOut  && this._notify('mouseout' , oldSelected, origDomEvent, intersect);\n\t},\n\n\n\t/********************************************************************************/\n\t/*\t\tonEvent\t\t\t\t\t\t\t\t*/\n\t/********************************************************************************/\n\n\t// # handle click kind of events\n\n\t_onEvent\t: function( eventName, mouseX, mouseY, origDomEvent )\n\t{\n\t//console.log('eventName', eventName, 'boundObjs', this._boundObjs[eventName])\n\t\t// get objects bound to this event\n\t\tlet boundObjs\t= this._boundObjs[eventName];\n\t\tif( boundObjs === undefined || boundObjs.length === 0 )\treturn;\n\t\t// compute the intersection\n\t\tlet vector\t= new Vector3( mouseX, mouseY, 0.5 );\n\t\tthis._ray.setFromCamera( vector, this._camera );\n\n\t\tlet intersects = null;\n\t\ttry {\n\t\t\tintersects  = this._ray.intersectObjects( boundObjs );\n\t\t} catch( e ){\n\t\t\tthis.clean();\n\t\t\tthis._onMove( eventName, mouseX, mouseY, origDomEvent );\n\t\t\treturn;\n\t\t}\n\n\t\t//console.log(\"RHinter \",eventName, \" \", intersects );\n\n\n\t\t// if there are no intersections, return now\n\t\tif( intersects.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\t\t// init some vairables\n\t\tlet intersect\t= intersects[0];\n\t\tlet object3d\t= intersect.object;\n\t\tlet objectCtx\t= this._objectCtxGet(object3d);\n\t\tif( !objectCtx )\treturn;\n\n\t\t// notify handlers\n\t\tif ( !object3d.geometry ){\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notify(eventName, object3d, origDomEvent, intersect);\n\t},\n\n\t_notify\t: function( eventName, object3d, origDomEvent, intersect )\n\t{\n\t\tlet objectCtx\t= this._objectCtxGet( object3d );\n\t\tlet handlers\t= objectCtx ? objectCtx[eventName+'Handlers'] : null;\n\n\t\t// parameter check\n\t\tconsole.assert(arguments.length === 4);\n\n\t\t// do bubbling\n\t\tif( !objectCtx || !handlers || handlers.length === 0 ){\n\t\t\tobject3d.parent && this._notify( eventName, object3d.parent, origDomEvent, intersect );\n\t\t\treturn;\n\t\t}\n\n\t\t// notify all handlers\n\t\thandlers = objectCtx[eventName+'Handlers'];\n\t\tlet toPropagate\t= true;\n\n\t\tfor( let i = 0; i < handlers.length; i++ ){\n\t\t\tlet handler\t= handlers[i];\n\t\t\tif ( typeof handler.callback === \"function\") {\n\t\t\t\thandler.callback({\n\t\t\t\t\ttype: eventName,\n\t\t\t\t\ttarget: object3d,\n\t\t\t\t\torigDomEvent: origDomEvent,\n\t\t\t\t\tintersect: intersect,\n\t\t\t\t\tstopPropagation: function () {\n\t\t\t\t\t\ttoPropagate = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if ( typeof handler.callback === \"string\" && typeof object3d.dispatchEvent === \"function\" ) {\n\t\t\t\tobject3d.dispatchEvent( {\n\t\t\t\t\ttype: handler.callback,\n\t\t\t\t\ttarget: object3d,\n\t\t\t\t\torigDomEvent: origDomEvent,\n\t\t\t\t\tintersect: intersect,\n\t\t\t\t\tstopPropagation: function () {\n\t\t\t\t\t\ttoPropagate = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif( !toPropagate ) continue;\n\t\t\t// do bubbling\n\t\t\tif( handler.useCapture === false ){\n\t\t\t\tobject3d.parent && this._notify( eventName, object3d.parent, origDomEvent, intersect );\n\t\t\t}\n\t\t}\n\t},\n\n\t/********************************************************************************/\n\t/*\t\thandle mouse events\t\t\t\t\t\t*/\n\t/********************************************************************************/\n\t// # handle mouse events\n\n\t_onMouseDown\t: function( event ){\n\t\tif ( event.buttons && event.buttons > 1 ) {\n\t\t\tif ( event.button === 1 ) {\n\t\t\t\treturn this._onMouseEvent('mousemiddledown', event);\n\t\t\t}\n\t\t\tif ( event.button === 2 ) {\n\t\t\t\t//rightdown\n\t\t\t\treturn this._onMouseEvent('mouserightdown', event);\n\t\t\t}\n\t\t}\n\t\tDomEvents.timeStamp = event.timeStamp;\n\n\t\treturn this._onMouseEvent('mousedown', event);\n\t},\n\t_onMouseUp\t: function( event ){\n        if ( event.buttons && event.buttons > 1 ) {\n            if ( event.button === 1 ) {\n                return this._onMouseEvent('mousemiddleup', event);\n            }\n            if ( event.button === 2 ) {\n                //rightdown\n                return this._onMouseEvent('mouserightup', event);\n            }\n        }\n\t\treturn this._onMouseEvent('mouseup'\t, event);\n\t},\n\n\t_onMouseEvent\t: function( eventName, domEvent )\n\t{\n\t\tlet mouseCoords = _getRelativeMouseXY( domEvent );\n\t\tthis._onEvent(eventName, mouseCoords.x, mouseCoords.y, domEvent);\n\t\t//console.log(\"RH\", eventName, mouseCoords.x, mouseCoords.y, domEvent);\n\t},\n\n\t_onMouseMove\t: function( domEvent )\n\t{\n\t\tlet mouseCoords = _getRelativeMouseXY( domEvent );\n\t\t\n\t\tthis._onMove('mousemove', mouseCoords.x, mouseCoords.y, domEvent);\n\t\tthis._onMove('mouseover', mouseCoords.x, mouseCoords.y, domEvent);\n\t\tthis._onMove('mouseout' , mouseCoords.x, mouseCoords.y, domEvent);\n\t},\n\n\t_onClick\t\t: function( event )\n\t{\n\t\t// TODO handle touch ?\n\t\tif ( DomEvents.timeStamp !== null && (event.timeStamp - DomEvents.timeStamp) > CLICK_TIMEOUT ){\n            return;\n        }\n        DomEvents.timeStamp = null;\n\t\tthis._onMouseEvent('click'\t, event);\n\t},\n\n\t_onDblClick\t\t: function( event )\n\t{\n\t\t// TODO handle touch ?\n\t\tthis._onMouseEvent('dblclick'\t, event);\n\t},\n\n\t_onContextmenu\t: function( event )\n\t{\n\t\t//TODO don't have a clue about how this should work with touch..\n\t\tthis._onMouseEvent('contextmenu'\t, event);\n\t},\n\n\n\t/********************************************************************************/\n\t/*\t\thandle touch events\t\t\t\t\t\t*/\n\t/********************************************************************************/\n\t// # handle touch events\n\n\t_onTouchStart\t: function( event ){\n\n\t\tTOUCH_BEGIN = new Date().getTime();\n\n\t\tTOUCH_POSX = event.touches[0].clientX;\n\t\tTOUCH_POSY = event.touches[0].clientY;\n\n\t\tTOUCH_TIMER = setTimeout(onlongtouch, TOUCH_duration);\n\n\t\treturn this._onTouchEvent('mousedown', event);\n\t},\n\n\t_onTouchEnd\t: function(event){\n\t\tconst TOUCH_END = new Date().getTime();\n\t\tconst time = TOUCH_END - TOUCH_BEGIN;\n\t\tconst timesince = TOUCH_END - TOUCH_LATEST;\n\t\tlet evt;\n\n\t\tif (event.touches.length > 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (TOUCH_TIMER) {\n\t\t\tclearTimeout(TOUCH_TIMER);\n\t\t}\n\n\t\tif( timesince < 500 && timesince > 0 ){\n\t\t\tevt = new MouseEvent(\"dblclick\", {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true,\n\t\t\t\tview: window,\n\t\t\t\tclientX: TOUCH_POSX,\n\t\t\t\tclientY: TOUCH_POSY,\n\t\t\t\toffsetX: TOUCH_POSX,\n\t\t\t\toffsetY: TOUCH_POSY,\n\t\t\t\tpageX: TOUCH_POSX,\n\t\t\t\tpageY: TOUCH_POSY\n\t\t\t});\n\t\t\tevent.target.dispatchEvent(evt);\n\t\t\tTOUCH_LATEST = new Date().getTime();\n\t\t\treturn this._onMouseEvent('mouseup', event);\n\t\t} else {\n\n\t\t\tif (time <= TOUCH_MS) {\n\t\t\t\tevt = new MouseEvent(\"click\", {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tview: window,\n\t\t\t\t\tclientX: TOUCH_POSX,\n\t\t\t\t\tclientY: TOUCH_POSY,\n\t\t\t\t\toffsetX: TOUCH_POSX,\n\t\t\t\t\toffsetY: TOUCH_POSY,\n\t\t\t\t\tpageX: TOUCH_POSX,\n\t\t\t\t\tpageY: TOUCH_POSY\n\t\t\t\t});\n\t\t\t\tevent.target.dispatchEvent(evt);\n\t\t\t\tTOUCH_LATEST = new Date().getTime();\n\t\t\t\treturn this._onMouseEvent('mouseup', event);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tTOUCH_LATEST = new Date().getTime();\n\t\t\t\treturn this._onTouchEvent('mouseup', event);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onTouchMove : function(domEvent)\n\t{\n\t\tif( domEvent.touches.length !== 1 )\treturn;\n\n\t\tdomEvent.preventDefault();\n\t\tlet mouseX\t= +(domEvent.touches[ 0 ].pageX / window.innerWidth ) * 2 - 1;\n\t\tlet mouseY\t= -(domEvent.touches[ 0 ].pageY / window.innerHeight) * 2 + 1;\n\n\t\tthis._onMove('mousemove', mouseX, mouseY, domEvent);\n\t\tthis._onMove('mouseover', mouseX, mouseY, domEvent);\n\t\tthis._onMove('mouseout' , mouseX, mouseY, domEvent);\n\t},\n\n\t_onTouchEvent : function(eventName, domEvent)\n\t{\n\t\tif( domEvent.touches.length !== 1 )\treturn;\n\n\t\tdomEvent.preventDefault();\n\n\t\tlet mouseX\t= +(domEvent.touches[ 0 ].pageX / window.innerWidth ) * 2 - 1;\n\t\tlet mouseY\t= -(domEvent.touches[ 0 ].pageY / window.innerHeight) * 2 + 1;\n\t\tthis._onEvent(eventName, mouseX, mouseY, domEvent);\n\t}\n\n});\n\n\n\tonlongtouch = function() {\n\t\t//console.log(\"longtouch\");\n\t};\n\nexport default DomEvents;\nexport { DomEvents };\n","import DomEvents from \"./Domevents.es.js\";\n\nDomEvents.eventNames.push(\"drag\");\nDomEvents.eventNames.push(\"dragstart\");\nDomEvents.eventNames.push(\"dragend\");\n\nDomEvents.eventMapping.dragstart = \"onDragstart\";\nDomEvents.eventMapping.dragend = \"onDragend\";\nDomEvents.eventMapping.drag = \"onDrag\";\n\n\nconst ExtendedDomEvents = function( camera, domElement, opt ){\n\n    this.stateMouse = {\n        mousedown : false,\n        dragging : false\n    };\n\n    this._draggingObj = null;\n\n    domElement.addEventListener(\"mousemove\", function( ev ){\n\t\tif ( this._draggingObj ){\n\t\t\tev.preventDefault();\n\t\t\tev.stopPropagation();\n\t\t}\n\t}.bind( this ) );\n    \n    //call parent constructor\n    DomEvents.apply( this, arguments );\n};\n\nExtendedDomEvents.prototype = Object.assign( Object.create( DomEvents.prototype ), {\n\n    constructor : ExtendedDomEvents,\n\n    addEventListener : function( object3d, eventName, callback, opt ){ \n        let scope = this;\n\n        if ( eventName === \"drag\" ){\n            object3d.addEventListener(\"dragstart\", function( event ){\n                scope._draggingObj = event.target;\n            });\n            object3d.addEventListener(\"dragend\", function( event ){\n                scope._draggingObj = null;\n            });\n        }\n        DomEvents.prototype.addEventListener.call(this, object3d, eventName, callback, opt);\n    },\n\n    _onMouseDown : function( event ){\n        \n        this.stateMouse.mousedown = true;\n        DomEvents.prototype._onMouseDown.call( this, event );\n    },\n\n    _onMouseMove : function( event ){\n        DomEvents.prototype._onMouseMove.call( this, event );\n\n        if ( this.stateMouse.mousedown ){\n            if ( !this.stateMouse.dragging ) {\n                this.stateMouse.dragging = true;\n                this._onMouseEvent('dragstart', event);\n            }\n            this._onMouseEvent('drag', event);\n        }\n    },\n\n    _onMouseUp : function( event ){\n        \n        DomEvents.prototype._onMouseUp.call( this, event );\n\n        if ( this.stateMouse.dragging ){ \n\n            this.stateMouse.dragging = false;\n            \n            if ( this._draggingObj ) {\n\n                this._notify ( \"dragend\", this._draggingObj, event, {object:this._draggingObj} );\n\n            } else {\n                \n                this._onMouseEvent('dragend', event);\n            }\n        }\n        this.stateMouse.mousedown = false;\n        \n    },\n\n    _stopDragging : function() {\n        \n    }\n});\n\nexport default ExtendedDomEvents;\nexport { DomEvents, ExtendedDomEvents };\n"],"names":["const","let","index","i"],"mappings":"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"}